(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1025],{5899:(e,t,r)=>{Promise.resolve().then(r.bind(r,8244))},2423:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(7401).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6967:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(7401).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1594:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(7401).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3239:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(7401).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6889:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(7401).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8617:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(7401).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5870:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(7401).A)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]])},767:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(7401).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8244:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var i=r(5155),s=r(2115),a=r(380),o=r(3839),n=r(6967),l=r(6889),d=r(2423),c=r(5870),m=r(8173),f=r.n(m);function p(){let{language:e,t}=(0,a.o)(),{showToast:r}=(0,o.d)(),[m,p]=(0,s.useState)([]),[x,y]=(0,s.useState)(!0),[h,g]=(0,s.useState)(0);(0,s.useEffect)(()=>{g(Date.now()),u();let e=setInterval(()=>g(Date.now()),1e4);return()=>clearInterval(e)},[]);let u=async()=>{try{let e=await fetch("/api/bids/my-bids"),t=await e.json();p(t)}catch(e){console.error(e)}finally{y(!1)}},[b,v]=(0,s.useState)(null),j=async e=>{if(!b){v(e);try{let i=await fetch("/api/orders/pay/".concat(e),{method:"POST"});if(i.ok)r(t("order_success_msg")||"Order successfully done!","success"),u();else{let e=await i.json();r(e.error||"Failed to complete order","error")}}catch(e){console.error(e),r("An error occurred","error")}finally{v(null)}}};return(0,i.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto",paddingBottom:"3rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",fontSize:"0.85rem",marginBottom:"1.5rem"},children:[(0,i.jsx)(f(),{href:"/retailer",style:{color:"inherit",textDecoration:"none"},children:t("sidebar_dashboard")}),(0,i.jsx)(n.A,{size:14}),(0,i.jsx)("span",{style:{color:"var(--primary-green)",fontWeight:"bold"},children:t("my_active_bids_title")||"My Active Bids"})]}),(0,i.jsxs)("div",{style:{marginBottom:"2.5rem"},children:[(0,i.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:"800",color:"var(--primary-green)",marginBottom:"0.5rem"},children:t("my_active_bids_title")||"My Active Bids"}),(0,i.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"1.1rem"},children:t("manage_bidding_desc")||"Manage and track your active bids in the marketplace."})]}),x?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"5rem 0"},children:[(0,i.jsx)("div",{className:"animate-spin",style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid var(--primary-green)",borderRadius:"50%",margin:"0 auto 1.5rem auto"}}),(0,i.jsx)("p",{style:{color:"var(--text-muted)",fontWeight:"500"},children:t("loading_bids")||"Loading your bids..."})]}):0===m.length?(0,i.jsxs)("div",{className:"card animate-fade",style:{textAlign:"center",padding:"5rem 2rem",background:"white",borderRadius:"24px"},children:[(0,i.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:"\uD83C\uDFAF"}),(0,i.jsx)("h2",{style:{marginBottom:"1rem"},children:t("no_active_bids")||"No active bids found"}),(0,i.jsx)("p",{style:{color:"var(--text-muted)",marginBottom:"2rem"},children:t("browse_market_hint")||"Start bidding on fresh crops to see your activity here."}),(0,i.jsxs)(f(),{href:"/retailer/marketplace",className:"btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"1rem 2rem",borderRadius:"12px"},children:[t("go_to_marketplace")||"Go to Marketplace"," ",(0,i.jsx)(n.A,{size:18})]})]}):(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(340px, 1fr))",gap:"2rem"},children:m.map(e=>{let r=new Date(e.crop.biddingEndTime).getTime()<=h,s="ACCEPTED"===e.status;return(0,i.jsxs)("div",{className:"card stat-card-hover animate-fade",style:{display:"flex",flexDirection:"column",padding:"1.5rem",borderRadius:"24px",border:"ACCEPTED"===e.status?"2px solid var(--primary-green)":"none",background:"white",position:"relative",overflow:"hidden"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.25rem",alignItems:"center"},children:[(0,i.jsx)("span",{style:{padding:"0.4rem 0.8rem",borderRadius:"100px",fontSize:"0.7rem",fontWeight:"800",background:"ACCEPTED"===e.status?"#f0fdf4":"REJECTED"===e.status?"#fef2f2":"#eff6ff",color:"ACCEPTED"===e.status?"#166534":"REJECTED"===e.status?"#991b1b":"#1e40af",textTransform:"uppercase"},children:e.status}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",color:r?"#64748b":"#ef4444",fontSize:"0.8rem",fontWeight:"700"},children:[(0,i.jsx)(l.A,{size:14}),(0,i.jsx)("span",{children:r?t("auction_closed")||"Closed":t("auction_live")||"Auction Live"})]})]}),(0,i.jsx)("h2",{style:{fontSize:"1.4rem",marginBottom:"0.5rem",color:"#1e293b"},children:e.crop.name}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",fontSize:"0.85rem",marginBottom:"1.25rem"},children:[(0,i.jsx)(d.A,{size:14})," ",new Date(e.createdAt).toLocaleDateString()]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem",background:"#f8fafc",padding:"1rem",borderRadius:"16px"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",fontWeight:"600"},children:t("qty_kg")||"Qty"}),(0,i.jsxs)("div",{style:{fontWeight:"800",fontSize:"1.1rem",color:"#1e293b"},children:[e.quantity," kg"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",fontWeight:"600"},children:t("your_price")||"Your Price"}),(0,i.jsxs)("div",{style:{fontWeight:"800",fontSize:"1.1rem",color:"var(--primary-green)"},children:["₹",e.pricePerKg,"/kg"]})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontWeight:"700",color:"#1e293b"},children:t("amount_column")||"Total Amount"}),(0,i.jsxs)("span",{style:{fontSize:"1.25rem",fontWeight:"900",color:"#1e293b"},children:["₹",(e.quantity*e.pricePerKg).toLocaleString()]})]}),(0,i.jsx)("div",{style:{marginTop:"auto"},children:s?(0,i.jsx)("button",{onClick:()=>j(e.id),className:"btn-primary",disabled:b===e.id,style:{width:"100%",padding:"1rem",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"800",opacity:b===e.id?.7:1,cursor:b===e.id?"not-allowed":"pointer"},children:b===e.id?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"animate-spin",style:{width:"18px",height:"18px",border:"2px solid white",borderTopColor:"transparent",borderRadius:"50%"}}),t("processing")||"Processing..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.A,{size:20})," ",t("complete_payment_btn")||"Complete Payment"]})}):(0,i.jsx)("div",{style:{textAlign:"center",padding:"1rem",background:"#f1f5f9",borderRadius:"12px",color:"#475569",fontSize:"0.9rem",fontWeight:"600",border:"1px solid #e2e8f0"},children:"PENDING"===e.status?t("awaiting_payment")||"Awaiting Action":e.status})})]},e.id)})})]})}},3839:(e,t,r)=>{"use strict";r.d(t,{ToastProvider:()=>f,d:()=>x});var i=r(5155),s=r(8803),a=r.n(s),o=r(2115),n=r(3239),l=r(1594),d=r(8617),c=r(767);let m=(0,o.createContext)(void 0);function f(e){let{children:t}=e,[r,s]=(0,o.useState)([]),a=(0,o.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e))},[]),n=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=Date.now();s(i=>[...i,{id:r,message:e,type:t}]),setTimeout(()=>a(r),5e3)},[a]);return(0,i.jsxs)(m.Provider,{value:{showToast:n},children:[t,(0,i.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:9999,display:"flex",flexDirection:"column",gap:"10px",pointerEvents:"none"},children:r.map(e=>(0,i.jsx)(p,{toast:e,onClose:()=>a(e.id)},e.id))})]})}function p(e){let{toast:t,onClose:r}=e,s=(()=>{switch(t.type){case"success":return{bg:"#f0fdf4",border:"#bbf7d0",color:"#15803d",icon:(0,i.jsx)(n.A,{size:20})};case"error":return{bg:"#fef2f2",border:"#fecaca",color:"#b91c1c",icon:(0,i.jsx)(l.A,{size:20})};case"warning":return{bg:"#fffbeb",border:"#fef3c7",color:"#b45309",icon:(0,i.jsx)(l.A,{size:20})};default:return{bg:"#eff6ff",border:"#dbeafe",color:"#1d4ed8",icon:(0,i.jsx)(d.A,{size:20})}}})();return(0,i.jsxs)("div",{style:{background:s.bg,border:"1px solid ".concat(s.border),color:s.color,padding:"12px 20px",borderRadius:"16px",boxShadow:"0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05)",display:"flex",alignItems:"center",gap:"12px",minWidth:"300px",maxWidth:"450px",pointerEvents:"auto",animation:"slideIn 0.3s ease-out forwards",position:"relative",overflow:"hidden"},className:"jsx-e320f81d480ff09a",children:[(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-e320f81d480ff09a",children:s.icon}),(0,i.jsx)("div",{style:{fontSize:"0.95rem",fontWeight:"600",flex:1},className:"jsx-e320f81d480ff09a",children:t.message}),(0,i.jsx)("button",{onClick:r,style:{background:"transparent",border:"none",color:"inherit",cursor:"pointer",opacity:.6,padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-e320f81d480ff09a",children:(0,i.jsx)(c.A,{size:16})}),(0,i.jsx)("div",{style:{position:"absolute",bottom:0,left:0,height:"3px",background:s.color,opacity:.2,animation:"progress 5s linear forwards"},className:"jsx-e320f81d480ff09a"}),(0,i.jsx)(a(),{id:"e320f81d480ff09a",children:"@-webkit-keyframes slideIn{from{-webkit-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);transform:translatex(0);opacity:1}}@-moz-keyframes slideIn{from{-moz-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-moz-transform:translatex(0);transform:translatex(0);opacity:1}}@-o-keyframes slideIn{from{-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-o-transform:translatex(0);transform:translatex(0);opacity:1}}@keyframes slideIn{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%);opacity:0}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0);opacity:1}}@-webkit-keyframes progress{from{width:100%}to{width:0%}}@-moz-keyframes progress{from{width:100%}to{width:0%}}@-o-keyframes progress{from{width:100%}to{width:0%}}@keyframes progress{from{width:100%}to{width:0%}}"})]})}let x=()=>{let e=(0,o.useContext)(m);if(!e)throw Error("useToast must be used within ToastProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[8173,5099,380,8441,1517,7358],()=>t(5899)),_N_E=e.O()}]);