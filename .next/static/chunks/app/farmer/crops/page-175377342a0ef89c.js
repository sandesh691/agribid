(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2096],{608:(e,t,i)=>{Promise.resolve().then(i.bind(i,1306))},7401:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r=i(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e,t,i)=>!!e&&""!==e.trim()&&i.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)((e,t)=>{let{color:i="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:c="",children:p,iconNode:m,...h}=e;return(0,r.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:i,strokeWidth:l?24*Number(n)/Number(s):n,className:a("lucide",c),...!p&&!d(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,i]=e;return(0,r.createElement)(t,i)}),...Array.isArray(p)?p:[p]])}),p=(e,t)=>{let i=(0,r.forwardRef)((i,n)=>{let{className:d,...o}=i;return(0,r.createElement)(c,{ref:n,iconNode:t,className:a("lucide-".concat(s(l(e))),"lucide-".concat(e),d),...o})});return i.displayName=l(e),i}},6967:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(7401).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3239:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(7401).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6889:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(7401).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},5525:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(7401).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},3473:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(7401).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},853:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(7401).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},1306:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>x});var r=i(5155),s=i(2115),n=i(8173),l=i.n(n),a=i(380);let d=e=>{let t=("string"==typeof e?Date.parse(e):e.getTime())-Date.now();if(t<=0)return"Ended";let i=Math.floor(t/1e3/60%60),r=Math.floor(t/36e5%24),s=Math.floor(t/864e5),n=[];return s>0&&n.push("".concat(s,"d")),(r>0||s>0)&&n.push("".concat(r,"h")),n.push("".concat(i,"m")),n.join(" ")};var o=i(3473),c=i(853),p=i(5525),m=i(6889),h=i(3239),g=i(6967);function x(){let{language:e,t}=(0,a.o)(),[i,n]=(0,s.useState)([]),[x,u]=(0,s.useState)(!0),[f,b]=(0,s.useState)(""),[y,v]=(0,s.useState)("ALL"),[j,A]=(0,s.useState)("ALL"),[w,_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{k()},[]);let k=async()=>{try{let e=await fetch("/api/crops?mine=true");if(e.ok){let t=await e.json();n(t)}}catch(e){console.error("Fetch crops error:",e)}finally{u(!1)}},S=i.filter(e=>{let t=e.name.toLowerCase().includes(f.toLowerCase()),i="ALL"===y||e.biddingStatus===y,r="ALL"===j||e.biddingType===j;return t&&i&&r}).sort((e,t)=>{var i,r,s,n;let l=new Date,a="ACTIVE"===e.biddingStatus&&new Date(e.biddingEndTime)>l,d="ACTIVE"===t.biddingStatus&&new Date(t.biddingEndTime)>l;if(a&&!d)return -1;if(!a&&d)return 1;let o=(null===(r=e.bids)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.createdAt)||e.createdAt;return new Date((null===(n=t.bids)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:s.createdAt)||t.createdAt).getTime()-new Date(o).getTime()});return(0,r.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto",paddingBottom:"3rem"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2.5rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"800",color:"#1e293b",marginBottom:"0.5rem"},children:t("sidebar_my_listings")}),(0,r.jsx)("p",{style:{color:"#64748b"},children:"hi"===e?"अपनी सक्रिय और पिछली फसल नीलामियों को प्रबंधित करें।":"kn"===e?"ನಿಮ್ಮ ಸಕ್ರಿಯ ಮತ್ತು ಹಳೆಯ ಹರಾಜುಗಳನ್ನು ನಿರ್ವಹಿಸಿ.":"Manage and track your active and past crop auctions."})]}),(0,r.jsxs)(l(),{href:"/farmer/crops/add",className:"btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.8rem 1.5rem",borderRadius:"12px"},children:[(0,r.jsx)(o.A,{size:20})," ",t("sidebar_add_crop")]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center",marginBottom:"2rem"},children:[(0,r.jsxs)("div",{style:{position:"relative",flex:1},children:[(0,r.jsx)(c.A,{size:20,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),(0,r.jsx)("input",{type:"text",placeholder:t("search_placeholder"),value:f,onChange:e=>b(e.target.value),style:{width:"100%",padding:"1rem 1rem 1rem 3rem",borderRadius:"14px",border:"1px solid #e2e8f0",fontSize:"1rem",background:"white"}})]}),(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsxs)("button",{className:"btn-outline ".concat(w?"active":""),onClick:()=>_(!w),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.9rem 1.5rem",borderRadius:"14px",background:"white",fontWeight:"bold"},children:[(0,r.jsx)(p.A,{size:20})," ","ALL"!==y||"ALL"!==j?t("filter_active"):t("filters")]}),w&&(0,r.jsxs)("div",{className:"card shadow",style:{position:"absolute",top:"110%",right:0,zIndex:100,width:"280px",padding:"1.5rem",borderRadius:"16px",border:"1px solid #e2e8f0"},children:[(0,r.jsxs)("div",{style:{marginBottom:"1.25rem"},children:[(0,r.jsx)("label",{style:{fontSize:"0.85rem",fontWeight:"700",display:"block",marginBottom:"0.75rem",color:"#1e293b"},children:t("bidding_status_label")}),(0,r.jsxs)("select",{value:y,onChange:e=>v(e.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"10px",border:"1px solid #cbd5e1",fontSize:"0.9rem"},children:[(0,r.jsx)("option",{value:"ALL",children:t("all_status")}),(0,r.jsx)("option",{value:"ACTIVE",children:t("active_bidding")}),(0,r.jsx)("option",{value:"CLOSED",children:t("closed_finished")})]})]}),(0,r.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,r.jsx)("label",{style:{fontSize:"0.85rem",fontWeight:"700",display:"block",marginBottom:"0.75rem",color:"#1e293b"},children:t("bidding_type_label")}),(0,r.jsxs)("select",{value:j,onChange:e=>A(e.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"10px",border:"1px solid #cbd5e1",fontSize:"0.9rem"},children:[(0,r.jsx)("option",{value:"ALL",children:t("all_types")}),(0,r.jsx)("option",{value:"BULK",children:t("bulk_bidding")}),(0,r.jsx)("option",{value:"MINI",children:t("mini_bidding")})]})]}),(0,r.jsx)("button",{className:"btn-primary",style:{width:"100%",padding:"0.75rem",borderRadius:"10px"},onClick:()=>_(!1),children:t("apply_btn")})]})]})]}),x?(0,r.jsxs)("div",{style:{textAlign:"center",padding:"4rem"},children:[(0,r.jsx)("div",{className:"spinner",style:{marginBottom:"1rem"}}),(0,r.jsx)("p",{style:{color:"#64748b"},children:t("loading_listings")})]}):0===S.length?(0,r.jsxs)("div",{className:"card",style:{textAlign:"center",padding:"5rem 2rem",borderRadius:"24px"},children:[(0,r.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:"\uD83D\uDCE6"}),(0,r.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"800",marginBottom:"0.5rem"},children:t("no_crops_found")}),(0,r.jsx)("p",{style:{color:"var(--text-muted)",marginBottom:"2.5rem"},children:t("no_match_filters")}),(0,r.jsx)(l(),{href:"/farmer/crops/add",className:"btn-primary",style:{padding:"1rem 2.5rem",borderRadius:"12px"},children:t("create_listing_btn")})]}):(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1.5rem"},children:S.map(e=>{var i,s,n,a;let o="ACTIVE"===e.biddingStatus&&new Date(e.biddingEndTime)>new Date;return(0,r.jsxs)("div",{className:"card hover-shadow",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.5rem 2rem",borderRadius:"20px",border:o?"2px solid var(--primary-green)":"1px solid #e2e8f0",boxShadow:o?"0 8px 16px -4px rgba(21, 128, 61, 0.15)":"none",position:"relative",overflow:"hidden"},children:[o&&(0,r.jsx)("div",{style:{position:"absolute",top:0,left:"30px",background:"var(--primary-green)",color:"white",fontSize:"0.7rem",padding:"4px 12px",borderRadius:"0 0 8px 8px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.05em",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:t("live_activity")}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1.75rem",alignItems:"center"},children:[(0,r.jsx)("div",{style:{width:"70px",height:"70px",borderRadius:"18px",background:"#f0fdf4",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",border:"1px solid #dcfce7",boxShadow:"inset 0 2px 4px rgba(21, 128, 61, 0.05)"},children:e.name.toLowerCase().includes("onion")?"\uD83E\uDDC5":e.name.toLowerCase().includes("tomato")?"\uD83C\uDF45":"\uD83C\uDF3E"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem",fontWeight:"800",color:"#1e293b"},children:e.name}),(0,r.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center",fontSize:"0.9rem",color:"#64748b"},children:[(0,r.jsx)("span",{style:{background:"BULK"===e.biddingType?"#e0f2fe":"#f1f5f9",color:"BULK"===e.biddingType?"#0369a1":"#475569",padding:"3px 10px",borderRadius:"6px",fontWeight:"800",fontSize:"0.75rem"},children:e.biddingType}),(0,r.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,r.jsx)("strong",{children:e.availableQuantity}),"/",e.totalQuantity," ",t("kg_available")]}),"ACTIVE"===e.biddingStatus&&o?(0,r.jsxs)("span",{style:{color:"#ef4444",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.35rem"},children:[(0,r.jsx)(m.A,{size:14})," ",t("ends_in")," ",d(e.biddingEndTime)]}):(0,r.jsxs)("span",{style:{color:"#94a3b8",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.35rem"},children:[(0,r.jsx)(h.A,{size:14})," ",t("closed_finished").toUpperCase()]})]})]})]}),(0,r.jsxs)("div",{style:{textAlign:"right",display:"flex",alignItems:"center",gap:"2.5rem"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:"0.85rem",color:"#64748b",marginBottom:"0.25rem"},children:(null===(i=e.bids)||void 0===i?void 0:i.length)>0?t("current_high_bid"):t("starting_price")}),(0,r.jsxs)("div",{style:{fontSize:"1.75rem",fontWeight:"900",color:o?"var(--primary-green)":"#1e293b",lineHeight:1},children:["₹",(null===(n=e.bids)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:s.pricePerKg)||e.minPrice,(0,r.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"700",marginLeft:"2px"},children:"/kg"})]}),(0,r.jsxs)("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"#94a3b8",marginTop:"0.5rem"},children:[(null===(a=e.bids)||void 0===a?void 0:a.length)||0," ",t("total_bids_label")]})]}),(0,r.jsxs)(l(),{href:"/farmer/crops/".concat(e.id),className:o?"btn-primary":"btn-outline",style:{fontSize:"0.9rem",padding:"0.8rem 1.75rem",borderRadius:"12px",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:o?"0 4px 12px rgba(21, 128, 61, 0.2)":"none"},children:[o?t("live_bids_btn"):t("manage_listing_btn")," ",(0,r.jsx)(g.A,{size:16})]})]})]},e.id)})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8173,380,8441,1517,7358],()=>t(608)),_N_E=e.O()}]);