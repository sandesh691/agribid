(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7618],{2934:(e,r,t)=>{Promise.resolve().then(t.bind(t,9409))},9409:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(5155),d=t(2115);function n(){let[e,r]=(0,d.useState)([]),[t,n]=(0,d.useState)(!0),[i,l]=(0,d.useState)(null),[o,a]=(0,d.useState)(""),[c,p]=(0,d.useState)(!1);(0,d.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/admin/reports"),t=await e.json();r(t)}catch(e){console.error(e)}finally{n(!1)}},x=async(e,r)=>{p(!0);try{(await fetch("/api/admin/reports/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r,adminNote:o})})).ok&&(l(null),a(""),h())}catch(e){console.error(e)}finally{p(!1)}};return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"User Reports & Complaints"}),t?(0,s.jsx)("p",{children:"Loading reports..."}):(0,s.jsx)("div",{style:{overflowX:"auto"},children:(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{style:{textAlign:"left",borderBottom:"2px solid #eee"},children:[(0,s.jsx)("th",{style:{padding:"1rem"},children:"User / Role"}),(0,s.jsx)("th",{style:{padding:"1rem"},children:"Type"}),(0,s.jsx)("th",{style:{padding:"1rem"},children:"Subject"}),(0,s.jsx)("th",{style:{padding:"1rem"},children:"Status"}),(0,s.jsx)("th",{style:{padding:"1rem"},children:"Date"}),(0,s.jsx)("th",{style:{padding:"1rem"},children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,s.jsxs)("td",{style:{padding:"1rem"},children:[(0,s.jsx)("div",{style:{fontWeight:"bold"},children:e.user.email}),(0,s.jsx)("div",{style:{fontSize:"0.8rem",color:"#666"},children:e.user.role})]}),(0,s.jsx)("td",{style:{padding:"1rem"},children:(0,s.jsx)("span",{style:{fontSize:"0.75rem",padding:"2px 6px",borderRadius:"4px",background:"#f1f5f9"},children:e.type.replace("_"," ")})}),(0,s.jsx)("td",{style:{padding:"1rem"},children:e.subject}),(0,s.jsx)("td",{style:{padding:"1rem"},children:(0,s.jsx)("span",{style:{fontSize:"0.75rem",padding:"4px 8px",borderRadius:"4px",fontWeight:"bold",background:"RESOLVED"===e.status?"#dcfce7":"IN_PROGRESS"===e.status?"#fef9c3":"#fee2e2",color:"RESOLVED"===e.status?"#166534":"IN_PROGRESS"===e.status?"#854d0e":"#991b1b"},children:e.status})}),(0,s.jsx)("td",{style:{padding:"1rem",fontSize:"0.85rem"},children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsx)("td",{style:{padding:"1rem"},children:(0,s.jsx)("button",{onClick:()=>{l(e),a(e.adminNote||"")},style:{color:"var(--primary-green)",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:"View Details"})})]},e.id))})]})}),i&&(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,s.jsxs)("div",{className:"card",style:{width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:[(0,s.jsx)("h3",{children:"Report Details"}),(0,s.jsx)("button",{onClick:()=>l(null),style:{border:"none",background:"none",cursor:"pointer",fontSize:"1.5rem"},children:"\xd7"})]}),(0,s.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"From:"})," ",i.user.email," (",i.user.role,")"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Type:"})," ",i.type]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Subject:"})," ",i.subject]}),(0,s.jsxs)("div",{style:{background:"#f8fafc",padding:"1rem",borderRadius:"8px",marginTop:"0.5rem"},children:[(0,s.jsx)("strong",{children:"Description:"}),(0,s.jsx)("p",{style:{whiteSpace:"pre-wrap",marginBottom:0},children:i.description})]})]}),(0,s.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Admin Note / Response"}),(0,s.jsx)("textarea",{rows:4,value:o,onChange:e=>a(e.target.value),placeholder:"Add a response or internal note...",style:{width:"100%",padding:"0.75rem",borderRadius:"6px",border:"1px solid #cbd5e0"}})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,s.jsx)("button",{onClick:()=>x(i.id,"IN_PROGRESS"),disabled:c,style:{flex:1,padding:"0.75rem",borderRadius:"6px",border:"none",background:"#eab308",color:"white",fontWeight:"bold",cursor:"pointer"},children:"Mark In Progress"}),(0,s.jsx)("button",{onClick:()=>x(i.id,"RESOLVED"),disabled:c,style:{flex:1,padding:"0.75rem",borderRadius:"6px",border:"none",background:"var(--primary-green)",color:"white",fontWeight:"bold",cursor:"pointer"},children:"Mark Resolved"})]})]})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[8441,1517,7358],()=>r(2934)),_N_E=e.O()}]);