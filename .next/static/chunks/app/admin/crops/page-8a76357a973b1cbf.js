(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4830],{6466:(e,i,r)=>{Promise.resolve().then(r.bind(r,5621))},5621:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>l});var s=r(5155),t=r(2115),n=r(3839),d=r(7149);function l(){let{showToast:e}=(0,n.d)(),{showModal:i}=(0,d.h)(),[r,l]=(0,t.useState)([]),[a,c]=(0,t.useState)(!0);(0,t.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=await fetch("/api/admin/crops"),i=await e.json();l(i)}catch(e){console.error(e)}finally{c(!1)}},h=async r=>{i({title:"Remove Listing?",message:"Are you sure you want to remove this crop listing? This action is permanent and will notify the farmer.",type:"confirm",confirmText:"Yes, Remove Listing",cancelText:"Cancel",onConfirm:async()=>{try{(await fetch("/api/admin/crops/".concat(r),{method:"DELETE"})).ok?(e("Listing removed successfully.","success"),o()):e("Failed to remove listing.","error")}catch(i){console.error(i),e("An error occurred while removing the listing.","error")}}})};return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"Marketplace Audit"}),a?(0,s.jsx)("p",{children:"Loading listings..."}):(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{style:{textAlign:"left",borderBottom:"2px solid #eee"},children:[(0,s.jsx)("th",{style:{padding:"1rem"},children:"Crop / Farmer"}),(0,s.jsx)("th",{style:{padding:"1rem"},children:"Type"}),(0,s.jsx)("th",{style:{padding:"1rem"},children:"Price/Qty"}),(0,s.jsx)("th",{style:{padding:"1rem"},children:"Bids"}),(0,s.jsx)("th",{style:{padding:"1rem"},children:"Actions"})]})}),(0,s.jsx)("tbody",{children:r.map(e=>(0,s.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,s.jsxs)("td",{style:{padding:"1rem"},children:[(0,s.jsx)("div",{style:{fontWeight:"bold"},children:e.name}),(0,s.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:["ID: ",e.farmer.user.email]})]}),(0,s.jsx)("td",{style:{padding:"1rem"},children:(0,s.jsx)("span",{className:"badge ".concat("BULK"===e.biddingType?"badge-sold":"badge-active"),children:e.biddingType})}),(0,s.jsxs)("td",{style:{padding:"1rem"},children:[(0,s.jsxs)("div",{children:["â‚¹",e.minPrice,"/kg"]}),(0,s.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:[e.availableQuantity,"kg available"]})]}),(0,s.jsxs)("td",{style:{padding:"1rem"},children:[e.bids.length," Bids"]}),(0,s.jsx)("td",{style:{padding:"1rem"},children:(0,s.jsx)("button",{onClick:()=>h(e.id),style:{color:"#c62828",background:"none",border:"none",cursor:"pointer",textDecoration:"underline"},children:"Remove Listing"})})]},e.id))})]})]})}}},e=>{var i=i=>e(e.s=i);e.O(0,[5099,7899,8441,1517,7358],()=>i(6466)),_N_E=e.O()}]);